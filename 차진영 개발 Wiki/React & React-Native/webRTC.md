# webRTC

**web RealTime Communication**

웹/앱에서 **플러그인** 없이 실시간으로 오디오, 비디오 등의 데이터를 주고 받을 수 있게 하는 오픈소스 기술

### 특징

- **실시간 통신 기능**
  ⇒ 낮은 **latency**를 가져 **RTMP**에 비해 실시간에 가까운 소통이 가능
- **P2P 방식**
  ⇒ 클라이언트 간 직접 데이터를 주고 받아 서버의 부담이 적고 빠른 통신이 가능
- **오픈소스**
  ⇒ 무료이고 누구나 자유롭게 사용하고 수정, 배포할 수 있어 진입장벽이 낮음

### WebRTC 서버의 종류

기본적으로 P2P 연결을 시도하지만, 여러 네트워크 환경에서 성공적인 연결을 보장받기 위해 다양한 서버 사용

- **시그널링 서버**
  - 클라이언트 간의 세션 연결 설정을 위한 정보를 교환하는 역할
  - 주로 **네트워크 정보(IP 주소, 포트)**와 **미디어 설정(코덱, 해상도)**을 교환
  - 개발자의 직접 구현 필요
- **STUN (Session Traversal Utilities for NAT)**
  - 사용자가 **NAT** 뒤에 있을 때 자신의 **공인 IP 주소**와 **포트**를 발견하도록 도와주는 서버
  - 매우 가벼운 서버로 부하가 적음
- **TURN (Traversal Using Relays around NAT)**
  - **STUN** 서버로도 **P2P** 연결이 불가능한 경우, **데이터 통신**을 위한 중계 서버
  - 두 피어 간의 모든 **미디어 데이터**를 주고 받음
  - **네트워크 대역폭**과 **서버 자원 소모**가 높음
- **미디어 서버**
  - 복잡한 **WebRTC 애플리케이션**을 구축할 때 사용
  - **믹싱**, **라우팅** 등에 사용
  - **SFU (Selective Forwarding Unit)**
    ⇒ 각 참여자의 스트림을 서버가 받아 다른 모든 참여자에게 개별적으로 전달
    ⇒ **클라이언트 부하 높음** / **서버 부하가 낮음** / **유연성** 높음
  - **MCU (Multipoint Control Unit)**
    ⇒ 참여자의 스트림을 서버가 받아 혼합된 비디오 스트림으로 만든 후, 다시 각 참여자에게 전달
    ⇒ **서버 부하가 높음** / **클라이언트 부하가 낮음**

### WebRTC 프레임워크 / 서버의 종류

- **Janus**
  - **모듈화된 구조**로 기능 확장이 용이
  - 다양한 **플러그인**을 통해 복잡한 기능을 쉽게 구현
  - **C**로 되어 있으며, 러닝 커브가 높음
- **Kurento**
  - 복잡한 미디어 처리를 위한 파이프라인 개념을 도입 ⇒ 다양한 미디어 처리 기능을 제공
  - 고급 비디오 편집이나 AI 기반 스트림 분석 등에 적합
  - **Janus**에 비해 더 무겁고 복잡함
  - 모든 **미디어 처리 기능**이 **서버**에서 이루어져 서버 자원이 많이 소모
- **Mediasoup**
  - **JavaScript** 기반의 **SFU** ⇒ **Node.js** 환경에서 동작
  - 서버 부하가 상대적으로 낮아 **확장성**이 뛰어남
  - **다자간 통화**에 최적화
  - 제공하는 기능이 다소 **제한적**
  - 클라이언트의 **네트워크 상태**에 의존

[WebRTC 구현하기(Janus)](<./webRTC/WebRTC%20구현하기(Janus).md>)
