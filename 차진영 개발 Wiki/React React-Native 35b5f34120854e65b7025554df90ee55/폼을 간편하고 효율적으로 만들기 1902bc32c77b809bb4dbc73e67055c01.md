# 폼을 간편하고 효율적으로 만들기

작성 폼을 만들 때, 입력 값의 데이터와 변한 값을 추적하는 이벤트, 필수 입력 여부와 패턴 검사 등, 다양한 제약에 대한 이벤트를 직접 작성해야 하기 때문에 코드가 난해하고 길어지는 문제가 있다.

⇒ `react-hook-form`을 사용하여 폼 작성 코드를 가볍게 줄이고 효율적으로 관리할 수 있다.

### 설치

- `npm i react-hook-form`

### **코드**

**기본 폼**

```jsx
import { useForm } from "react-hook-form";

type LoginFormType {
  id: string;
  password: string;
};

const LoginForm = () => {
	const { register, handleSubmit } = useForm<LoginFormType>();
	
	const onSubmit = (data) => {
	  // 작성 완료 이벤트
	};
	
	return (
	  <form onSubmit={handleSubmit(onSubmit)}>
	    <input {...register("id", {
		    required: "ID를 입력해주세요"
	    })} placeholder="ID" />
	    <input type="password" {...register("password")} placeholder="Password" />
	    <button type="submit">Login</button>
	  </form>
	);
};
```

`register`에 폼 데이터를 추가하고 `handleSubmit` 제출 이벤트 핸들러를 등록한다.

이후 입력 태그에 `{…register(”DATA_NAME”)}`을 추가하여 입력 이벤트를 동작한다.

또한 `register`에 유효성 검사를 위한 옵션을 추가할 수 있다.

⇒ 조건에 부합하지 않았을 때 보여줄 메시지 등록 가능

- `required`: 데이터 필수 입력 여부
- `maxLength`: 최대 입력 글자 수
- `minLength`: 최소 입력 글자 수
- `max`: number일 경우 최대 입력 크기
- `min`: number일 경우 최소 입력 크기
- `pattern`: 입력 패턴 ⇒ `{value: 패턴, message: 에러 메시지}` 형식으로 작성
- `validate`: 유효성 검사 이벤트

**useForm의 기능**

`useForm`에 인자로 다양한 기능을 추가하여 더욱 최적화된 폼을 개발할 수 있다.

- **formState**
    
    ```jsx
    const {
      register,
      handleSubmit,
      formState: { errors },
    } = useForm();
    ```
    
    **전체 폼 상태**에 대한 정보를 확인할 수 있다.
    
    ⇒ 주로 `errors` 값을 받아 유효성 검사의 에러 메시지를 확인하는데 사용한다.
    
- **watch**
    
    ```jsx
    const {
      register,
      watch,
      handleSubmit,
    } = useForm();
    
    const password = watch("password", "");
    ```
    
    실시간으로 **입력 값**을 감지하고 가져오는 역할을 수행한다.
    
    ⇒ 주로 입력 값을 다른 값과 비교할 때 사용한다. (ex: 비밀번호 확인)
    
- **reset**
    
    ```jsx
    const { register, handleSubmit, reset } = useForm();
    
    const onSubmit = (data) => {
      // 작성 완료 이벤트
      reset();
    };
    ```
    
    폼의 값을 전부 **초기화**한다.
    
    ⇒ 주로 작성 완료 이벤트 수행 후 폼 정보를 지울 때 사용한다. 
    
- **defaultValues**
    
    ```jsx
    const { register, handleSubmit } = useForm({
      defaultValues: {
        fruit: "apple",
        price: 1000,
      },
    });
    ```
    
    폼에 기본적으로 들어갈 `defaultValue`를 추가한다.
    
- **mode**
    
    ```jsx
    const { register, handleSubmit } = useForm({
      mode: "onChange",
    });
    ```
    
    제출 이벤트 발생 시점을 결정한다.
    
    - `onChange`: 값이 변경될 때마다 이벤트 발생
    - `onBlur`: 입력을 멈췄을 때 이벤트 발생
    - `onSubmit`: 제출 이벤트 발생 시 이벤트 발생
    - `onTouched`: 입력 폼을 누를 때마다 이벤트 발생

### **참고**

- [react-hook-form](https://react-hook-form.com/)